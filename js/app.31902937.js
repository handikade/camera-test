(function(e){function t(t){for(var n,o,c=t[0],s=t[1],l=t[2],p=0,f=[];p<c.length;p++)o=c[p],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,c=1;c<a.length;c++){var s=a[c];0!==i[s]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},i={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/camera-test/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"09a8":function(e,t,a){},"0c97":function(e,t,a){},2403:function(e,t,a){"use strict";var n=a("0c97"),i=a.n(n);i.a},"2bfb":function(e,t,a){e.exports=a.p+"img/camera-overlay.db67925c.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isShowCamera?a("VerifCamera",{on:{closeCamera:function(t){e.isShowCamera=!1},setUserImage:function(t){e.pasFoto=t}}}):e._e(),a("AppContainer",[a("VerifPhotoInput",{attrs:{icon:e.cameraIcon,"field-name":"Foto selfie dengan KTP","input-label":"Foto Selfie + KTP",mode:"camera"},on:{openCamera:function(t){e.isShowCamera=!0}},model:{value:e.pasFoto,callback:function(t){e.pasFoto=t},expression:"pasFoto"}}),a("br"),a("br"),a("VerifPhotoInput",{attrs:{icon:e.ktpIcon,"field-name":"Foto KTP","input-label":"Foto KTP"},on:{input:e.handleInput},model:{value:e.fotoKTP,callback:function(t){e.fotoKTP=t},expression:"fotoKTP"}}),a("br"),a("br"),a("AppLogs",{attrs:{logs:e.logs}})],1)],1)},r=[],o=(a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e._t("default")],2)}),c=[],s={name:"AppContainer"},l=s,u=(a("2403"),a("2877")),p=Object(u["a"])(l,o,c,!1,null,"373485e8",null),f=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"verif-camera",on:{click:e.closeCamera}},[a("div",{staticClass:"verif-camera__panel",on:{click:function(e){e.stopPropagation()}}},[a("div",{staticStyle:{color:"#707070","font-size":"16px","margin-bottom":"20px","text-align":"center"}},[e._v("Ayo ambil foto selfie sambil memegang KTP. Say Cheese ;)")]),a("div",{staticClass:"verif-camera__panel__placeholder"},[a("video",{directives:[{name:"show",rawName:"v-show",value:e.captureMode,expression:"captureMode"}],ref:"video",staticClass:"verif-camera__panel__placeholder__video",attrs:{autoplay:""}}),e.captureMode?e._e():a("img",{staticClass:"verif-camera__panel__placeholder__result",attrs:{src:e.image}}),a("canvas",{ref:"canvas",staticClass:"verif-camera__panel__placeholder__canvas",attrs:{height:"450",id:"canvas",width:"600"}})]),a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"20px"}},[e.captureMode?a("button",{on:{click:e.capture}},[e._v("Ambil Foto")]):e._e(),e.captureMode?e._e():a("button",{on:{click:e.reCapture}},[e._v("Ulang")]),e.captureMode?e._e():a("button",{on:{click:e.saveImage}},[e._v("Simpan")])])])])},d=[],v=a("8f24"),h=v["a"],g=(a("6487"),Object(u["a"])(h,m,d,!1,null,"12171b6e",null)),b=g.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.styleClass},[a("div",{staticClass:"verif-photo-input__label"},[e._v(e._s(e.inputLabel))]),a("input",{ref:"fileInput",attrs:{accept:"image/*",type:"file"},on:{input:e.onImageSelect}}),e.value?e._e():a("div",{staticClass:"verif-photo-input__box",on:{click:e.selectImage}},[a("img",{staticClass:"verif-photo-input__box__icon",attrs:{src:e.activeIcon,alt:"Icon"}})]),e.value?a("div",{staticClass:"verif-photo-input__placeholder",on:{click:e.selectImage}},[a("img",{attrs:{src:e.imageUrl,alt:"Image"}}),a("div",{staticClass:"verif-photo-input__placeholder__overlay"},[e._v("Ubah")])]):e._e()])},y=[],C=(a("6762"),a("2fdb"),a("96cf"),a("3b8d")),w={name:"VerifPhotoInput",props:{value:null,inputLabel:{type:String,default:""},fieldName:{type:String,default:""},icon:{type:String,default:null},iconError:{type:String,default:null},mode:{type:String,default:""},validation:{type:Object,default:function(){return{}}}},data:function(){return{imageFile:null,validImageTypes:["image/jpg","image/jpeg","image/png"]}},computed:{isError:function(){return this.validation.$error},styleClass:function(){return["verif-photo-input",{"verif-photo-input--is-error":this.isError}]},imageUrl:function(){return this.value?URL.createObjectURL(this.value):null},activeIcon:function(){return this.isError?this.iconError:this.icon}},methods:{selectImage:function(){"camera"==this.mode?this.$emit("openCamera"):this.$refs.fileInput.click()},onImageSelect:function(e){var t=this;this.imageFile=e.target.files[0],this.imageFile&&this.validate().then((function(e){e&&t.$emit("input",t.imageFile)}))},promptErrorAlert:function(e){alert(e)},validate:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=!1,a=!1,n=!1,t=this.validateType(),console.log("validate type",t),t&&(a=this.validateSize(),console.log("validate size",a)),!a){e.next=10;break}return e.next=9,this.validateDimension().then((function(e){n=e}));case 9:console.log("validate dimension",n);case 10:return console.log("----------------------------------"),e.abrupt("return",new Promise((function(e,i){e(n&&t&&a)})));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validateType:function(){try{var e=this.imageFile.type;return console.log("tipe file",e),console.log("tipe valid?",this.validImageTypes.includes(e)),!!this.validImageTypes.includes(e)||(this.promptErrorAlert("Hanya menerima file gambar JPG/PNG"),!1)}catch(t){return console.log(t),!1}},validateSize:function(){return!0},validateDimension:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=0,a=0,n=null,e.next=5,this.loadImage().then((function(e){n=e}));case 5:return e.abrupt("return",new Promise((function(e,r){try{t=n.width,console.log("image width",t),a=n.height,console.log("image height",a)}catch(o){i.promptErrorAlert("Fail to get image dimension. Please upload a proper image."),e(!1)}t<256?(i.promptErrorAlert("Lebar ".concat(i.fieldName," minimal 256px")),e(!1)):a<256?(i.promptErrorAlert("Tinggi ".concat(i.fieldName," minimal 256px")),e(!1)):e(!0)})));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadImage:function(){var e=this;return new Promise((function(t,a){var n=new Image;n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(e){return a(e)})),n.src=URL.createObjectURL(e.imageFile)}))}}},x=w,I=(a("9b26"),Object(u["a"])(x,_,y,!1,null,"a1001964",null)),P=I.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.logs.length>0?a("div",{staticClass:"app-logs"},e._l(e.logs,(function(t,n){return a("p",{key:n},[e._v(e._s(t))])})),0):e._e()},F=[],O={name:"AppLogs",props:{logs:{type:Array,default:[]}}},S=O,k=(a("fa3f"),Object(u["a"])(S,j,F,!1,null,"a689e540",null)),A=k.exports,T={name:"App",components:{AppContainer:f,VerifCamera:b,VerifPhotoInput:P,AppLogs:A},data:function(){return{isShowCamera:!1,cameraIcon:a("c6ac"),ktpIcon:a("a5d8"),pasFoto:null,fotoKTP:null,logs:[]}},methods:{handleInput:function(e){this.logs.push("image set to: ".concat(e.name))}}},E=T,L=Object(u["a"])(E,i,r,!1,null,null,null),U=L.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(U)}}).$mount("#app")},"595f":function(e,t,a){},6487:function(e,t,a){"use strict";var n=a("92af"),i=a.n(n);i.a},"8f24":function(e,t,a){"use strict";(function(e){a("34ef"),a("4917"),a("28a5");t["a"]={name:"VerifCamera",data:function(){return{video:{},canvas:{},image:null,captureMode:!0,imageFile:null,cameraOverlay:a("2bfb")}},methods:{closeCamera:function(){this.$emit("closeCamera")},activateCamera:function(){var e=this;this.video=this.$refs.video,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){e.video.srcObject=t,e.video.play()}))},deActivateCamera:function(){},capture:function(){this.canvas=this.$refs.canvas;this.canvas.getContext("2d").drawImage(this.video,0,0);this.image=canvas.toDataURL("image/jpg"),this.captureMode=!1},reCapture:function(){this.image=null,this.captureMode=!0},saveImage:function(){this.imageFile=this.dataURLtoFile(this.image),this.$emit("setUserImage",this.imageFile),this.closeCamera()},dataURLtoFile:function(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,r=new Uint8Array(i);while(i--)r[i]=n.charCodeAt(i);return new File([r],"foto-diri",{type:a})}},mounted:function(){e.browser&&this.activateCamera()},beforeDestroy:function(){e.browser&&this.deActivateCamera()},created:function(){document.body.classList.add("lock")},destroyed:function(){document.body.classList.remove("lock")}}}).call(this,a("f28c"))},"92af":function(e,t,a){},"9b26":function(e,t,a){"use strict";var n=a("595f"),i=a.n(n);i.a},a5d8:function(e,t,a){e.exports=a.p+"img/ktp.b05b20d6.svg"},c6ac:function(e,t,a){e.exports=a.p+"img/camera.e2267402.svg"},fa3f:function(e,t,a){"use strict";var n=a("09a8"),i=a.n(n);i.a}});
//# sourceMappingURL=app.31902937.js.map